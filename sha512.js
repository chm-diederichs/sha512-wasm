
module.exports = loadWebAssembly

loadWebAssembly.supported = typeof WebAssembly !== 'undefined'

function loadWebAssembly (opts) {
  if (!loadWebAssembly.supported) return null

  var imp = opts && opts.imports
  var wasm = toUint8Array('AGFzbQEAAAABRgpgAX8AYAF/AX9gAn9/AGABfgBgAX4BfmACf34BfmACfn4AYAR+fn5+AX5gEX9+fn5+fn5+fn5+fn5+fn5+AGAEf39/fwACKQMFZGVidWcDbG9nAAAFZGVidWcHbG9nX3RlZQABBWRlYnVnA2xvZwACAwoJAwQEBQUGBwgJBQMBAAAG4QhYfgFCAAt+AUIAC34BQgALfgFCAAt+AUIAC34BQgALfgFCAAt+AUIAC34AQqLcormN84vFwgALfgBCzcu9n5KS0ZvxAAt+AEKv9rTi/vm+4LV/C34AQry3p4zY9PbaaQt+AEK46qKav8uwqzkLfgBCmaCXsJu+xPjZAAt+AEKbn+X4ytTgn5J/C34AQpiCttPd2peOq38LfgBCwoSMmIrT6oNYC34AQr7fwauU4NbBEgt+AEKM5ZL35LfhmCQLfgBC4un+r724n4bVAAt+AELvku6Tz66X3/IAC34AQrGt2tjjv6zvgH8LfgBCtaScrvLUge6bfwt+AEKUzaT7zK78zUELfgBC0pXF95m42s1kC34AQuPLvMLj8JHfbwt+AEK1q7Pc6Ljn4A8LfgBC5biyvce5qIYkC34AQvWErMn1jcv0LQt+AEKDyZv1ppWhusoAC34AQtT3h+rLu6rY3AALfgBCtafFmKib4vz2AAt+AEKrv5vzrqqUn5h/C34AQpDk0O3SzfGYqH8LfgBCv8Lsx4n5yYGwfwt+AELknbz3+/jfrL9/C34AQsKfou2z/oLwRgt+AEKlzqqY+ajk01ULfgBC74SOgJ7qmOUGC34AQvDcudDwrMqUFAt+AEL838i21NDC2ycLfgBCppKb4YWnyI0uC34AQu3VkNbFv5uWzQALfgBC3+fW7Lmig5zTAAt+AELex73dyOqcheUAC34AQqjl3uOz14K19gALfgBC5t22v+SlsuGBfwt+AEK76oik0ZCLuZJ/C34AQuSGxOeUlPrfon8LfgBCgeCI4rvJmY2ofwt+AEKRr+KHje7ipUILfgBCsPzSsrC0lLZHC34AQpikvbedg7rJUQt+AEKQ0parxcTBzFYLfgBCqsDEu9WwjYd0C34AQrij75WDjqi1EAt+AELIocvG66Kw0hkLfgBC09aGioWB25seC34AQpnXu/zN6Z2kJwt+AEKoke2M3pav2DQLfgBC47SlrryWg445C34AQsuVhpquyarszgALfgBC88aPu/fJss7bAAt+AEKj8cq1vf6bl+gAC34AQvzlvu/l3eDH9AALfgBC4N7cmPTt2NL4AAt+AELy1sKPyoKe5IR/C34AQuzzkNOBwcDjjH8LfgBCqLyMm6L/v9+Qfwt+AELp+4r0vZ2bqKR/C34AQpXymZb7/uj8vn8LfgBCq6bJm66e3rhGC34AQpzDmdHu2c+TSgt+AEKHhIOO8piuw1ELfgBCntaD7+y6n+1qC34AQviiu/P+79O+dQt+AEK6392Qp/WZ+AYLfgBCprGiltq437EKC34AQq6b5PfLgOafEQt+AEKbjvGY0ebCuBsLfgBChPuRmNL+3e0oC34AQpPJnIa076rlMgt+AEK8/aauocGvzzwLfgBCzJrA4Mn42Y7DAAt+AEK2hfnZ7Jf14swAC34AQqr8lePPs8q/2QALfgBC7PXb1rP12+XfAAt+AEKXsJ3SxLGGouwACwcTAgZtZW1vcnkCAAZzaGE1MTIACwq1FwkNACAAQiCHpyAApxACCwkAIAAQAyAADwtCACAAQoCA/P+PgECDQhCJIABC//+DgPD/P4NCEIqEIQAgAEL/gfyH8J/A/wCDQgiJIABCgP6D+I/gv4B/g0IIioQLDAAgACkDABAFIAGECxwBAX4gACkDACECQn8gAUIIfohCf4UgACkDAIMLigEBBn4jBCMFgyMEQn+FIwaDhSEEIwAjAYMjACMCg4UjASMCg4UhBSMAQhyKIwBCIoqFIwBCJ4qFIQYjBEIOiiMEQhKKhSMEQimKhSEHIwcgBHwgB3wgAHwgAXwhAiAGIAV8IQMjBiQHIwUkBiMEJAUjAyACfCQEIwIkAyMBJAIjACQBIAIgA3wkAAsrACAAQhOKIABCPYqFIABCBoiFIAF8IAJCAYogAkIIioUgAkIHiIUgA3x8C8kMAUZ+IA8gCiACIAEQCSEXIBAgCyADIAIQCSEYIBcgDCAEIAMQCSEZIBggDSAFIAQQCSEaIBkgDiAGIAUQCSEbIBogDyAHIAYQCSEcIBsgECAIIAcQCSEdIBwgFyAJIAgQCSEeIB0gGCAKIAkQCSEfIB4gGSALIAoQCSEgIB8gGiAMIAsQCSEhICAgGyANIAwQCSEiICEgHCAOIA0QCSEjICIgHSAPIA4QCSEkICMgHiAQIA8QCSElICQgHyAXIBAQCSEmICUgICAYIBcQCSEnICYgISAZIBgQCSEoICcgIiAaIBkQCSEpICggIyAbIBoQCSEqICkgJCAcIBsQCSErICogJSAdIBwQCSEsICsgJiAeIB0QCSEtICwgJyAfIB4QCSEuIC0gKCAgIB8QCSEvIC4gKSAhICAQCSEwIC8gKiAiICEQCSExIDAgKyAjICIQCSEyIDEgLCAkICMQCSEzIDIgLSAlICQQCSE0IDMgLiAmICUQCSE1IDQgLyAnICYQCSE2IDUgMCAoICcQCSE3IDYgMSApICgQCSE4IDcgMiAqICkQCSE5IDggMyArICoQCSE6IDkgNCAsICsQCSE7IDogNSAtICwQCSE8IDsgNiAuIC0QCSE9IDwgNyAvIC4QCSE+ID0gOCAwIC8QCSE/ID4gOSAxIDAQCSFAID8gOiAyIDEQCSFBIEAgOyAzIDIQCSFCIEEgPCA0IDMQCSFDIEIgPSA1IDQQCSFEIEMgPiA2IDUQCSFFIEQgPyA3IDYQCSFGIEUgQCA4IDcQCSFHIEYgQSA5IDgQCSFIIEcgQiA6IDkQCSFJIEggQyA7IDoQCSFKIEkgRCA8IDsQCSFLIEogRSA9IDwQCSFMIEsgRiA+ID0QCSFNIEwgRyA/ID4QCSFOIE0gSCBAID8QCSFPIE4gSSBBIEAQCSFQIE8gSiBCIEEQCSFRIFAgSyBDIEIQCSFSIFEgTCBEIEMQCSFTIFIgTSBFIEQQCSFUIFMgTiBGIEUQCSFVIFQgTyBHIEYQCSFWIAApA8ABQoABWARAIABCiJLznf/M+YTqADcDACAAQrvOqqbY0Ouzu383AwggAEKr8NP0r+68tzw3AxAgAELx7fT4paf9p6V/NwMYIABC0YWa7/rPlIfRADcDICAAQp/Y+dnCkdqCm383AyggAELr+obav7X2wR83AzAgAEL5wvibkaOz8NsANwM4CyAAKQMAJAAgACkDCCQBIAApAxAkAiAAKQMYJAMgACkDICQEIAApAygkBSAAKQMwJAYgACkDOCQHIAIjCRAIIAMjChAIIAQjCxAIIAUjDBAIIAYjDRAIIAcjDhAIIAgjDxAIIAkjEBAIIAojERAIIAsjEhAIIAwjExAIIA0jFBAIIA4jFRAIIA8jFhAIIBAjFxAIIBcjGBAIIBgjGRAIIBkjGhAIIBojGxAIIBsjHBAIIBwjHRAIIB0jHhAIIB4jHxAIIB8jIBAIICAjIRAIICEjIhAIICIjIxAIICMjJBAIICQjJRAIICUjJhAIICYjJxAIICcjKBAIICgjKRAIICkjKhAIICojKxAIICsjLBAIICwjLRAIIC0jLhAIIC4jLxAIIC8jMBAIIDAjMRAIIDEjMhAIIDIjMxAIIDMjNBAIIDQjNRAIIDUjNhAIIDYjNxAIIDcjOBAIIDgjORAIIDkjOhAIIDojOxAIIDsjPBAIIDwjPRAIID0jPhAIID4jPxAIID8jQBAIIEAjQRAIIEEjQhAIIEIjQxAIIEMjRBAIIEQjRRAIIEUjRhAIIEYjRxAIIEcjSBAIIEgjSRAIIEkjShAIIEojSxAIIEsjTBAIIEwjTRAIIE0jThAIIE4jTxAIIE8jUBAIIFAjURAIIFEjUhAIIFIjUxAIIFMjVBAIIFQjVRAIIFUjVhAIIFYjVxAIIAAgACkDACMAfDcDACAAIAApAwgjAXw3AwggACAAKQMQIwJ8NwMQIAAgACkDGCMDfDcDGCAAIAApAyAjBHw3AyAgACAAKQMoIwV8NwMoIAAgACkDMCMGfDcDMCAAIAApAzgjB3w3AzhCACEBQgAhAkIAIQNCACEEQgAhBUIAIQZCACEHQgAhCEIAIQlCACEKQgAhC0IAIQxCACENQgAhDkIAIQ9CACEQC6oIBAJ/BH4BfxV+IAApA0AhBiAAKQNIIQcgAEHQAGohBSACIQoCQCAFKQMAIQwgBSkDCCENIAUpAxAhDiAFKQMYIQ8gBSkDICEQIAUpAyghESAFKQMwIRIgBSkDOCETIAUpA0AhFCAFKQNIIRUgBSkDUCEWIAUpA1ghFyAFKQNgIRggBSkDaCEZIAUpA3AhGiAFKQN4IRsgCkHAAGsiCkEATA0AIAAgDCANIA4gDyAQIBEgEiATIBQgFSAWIBcgGCAZIBogGxAKA0AgASkDACEMIAEpAwghDSABKQMQIQ4gASkDGCEPIAEpAyAhECABKQMoIREgASkDMCESIAEpAzghEyABKQNAIRQgASkDSCEVIAEpA1AhFiABKQNYIRcgASkDYCEYIAEpA2ghGSABKQNwIRogASkDeCEbIApBwABrIgpBAEwEQCAAIAw3A1AgACANNwNYIAAgDjcDYCAAIA83A2ggACAQNwNwIAAgETcDeCAAIBI3A4ABIAAgEzcDiAEgACAUNwOQASAAIBU3A5gBIAAgFjcDoAEgACAXNwOoASAAIBg3A7ABIAAgGTcDuAEgACAaNwPAASAAIBs3A8gBDAILIAAgDCANIA4gDyAQIBEgEiATIBQgFSAWIBcgGCAZIBogGxAKDAALCyAGIQggBiACrXwhBiAGIAhUBEAgBiEIIAdCAXwhBwsgACAGNwNAIAAgBzcDSCADQQFGBEAgBkI/gyELQoABIAtCB4NCA4aGIQkCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgC6dBcHEODwMEBQYHCAkKCwwNDg8QAQILCyAJIBqEIRpCACEJCyAJIBuEIRtCACEJIAAgDCANIA4gDyAQIBEgEiATIBQgFSAWIBcgGCAZIBogGxAKCyAJIAyEIQxCACEJCyAJIA2EIQ1CACEJCyAJIA6EIQ5CACEJCyAJIA+EIQ9CACEJCyAJIBCEIRBCACEJCyAJIBGEIRFCACEJCyAJIBKEIRJCACEJCyAJIBOEIRNCACEJCyAJIBSEIRRCACEJCyAJIBWEIRVCACEJCyAJIBaEIRZCACEJCyAJIBeEIRdCACEJCyAJIBiEIRhCACEJCyAJIBmEIRlCACEJCyAGQj2IIAdCA4h8IRogBkIIfiEbIAxCAX0QAyAMEAMgDRADIA4QAyAPEAMgEBADIBEQAyASEAMgExADIBQQAyAVEAMgFhADIBcQAyAYEAMgGRADIBoQAyAbEANCgICAgICAgIAYIRsgACAMIA0gDiAPIBAgESASIBMgFCAVIBYgFyAYIBkgGiAbEAogACMAEAU3AwAgACMBEAU3AwggACMCEAU3AxAgACMDEAU3AxggACMEEAU3AyAgACMFEAU3AyggACMGEAU3AzAgACMHEAU3AzgLCw==')
  var ready = null

  var mod = {
    buffer: wasm,
    memory: null,
    exports: null,
    realloc: realloc,
    onload: onload
  }

  onload(function () {})

  return mod

  function realloc (size) {
    mod.exports.memory.grow(Math.max(0, Math.ceil(Math.abs(size - mod.memory.length) / 65536)))
    mod.memory = new Uint8Array(mod.exports.memory.buffer)
  }

  function onload (cb) {
    if (mod.exports) return cb()

    if (ready) {
      ready.then(cb.bind(null, null)).catch(cb)
      return
    }

    try {
      if (opts && opts.async) throw new Error('async')
      setup({instance: new WebAssembly.Instance(new WebAssembly.Module(wasm), imp)})
    } catch (err) {
      ready = WebAssembly.instantiate(wasm, imp).then(setup)
    }

    onload(cb)
  }

  function setup (w) {
    mod.exports = w.instance.exports
    mod.memory = mod.exports.memory && mod.exports.memory.buffer && new Uint8Array(mod.exports.memory.buffer)
  }
}

function toUint8Array (s) {
  if (typeof atob === 'function') return new Uint8Array(atob(s).split('').map(charCodeAt))
  return (require('buf' + 'fer').Buffer).from(s, 'base64')
}

function charCodeAt (c) {
  return c.charCodeAt(0)
}
